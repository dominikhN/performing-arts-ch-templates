<div data-flex-layout='row top-stretch'>
<semantic-form 
 [[#if create]]
    new-subject-template='http://data.performing-arts.ch/a/{{UUID}}'
    post-action="redirect"
  [[else]]
    subject='[[this]]'
    post-action="reload"
 [[/if]]
      browser-persistence=true
      form-id='groups'
       persistence='ldp'             
       fields='[[fieldDefinitions
        rdf_type="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupRDFType"
        official_name="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupOfficialName"
        alternative_name="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupAltName"
        acronym="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupAcronym"
        group_type="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupType"
        residence="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/ActorResidence"
        predecessor="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupPredecessor"
        formation_year="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupFormationYear"
        dissolution_year="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupDissolutionYear"
        controller="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupController"
        website="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/Website"
        venues="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupVenue"
        members="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupMember"
        associations="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupAssociation"
        record_sets="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/SubjectOf"
        sameAs="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/SameAs"
        note="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/Note"
        repertories="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/GroupRepertories"
      ]]'>
      <bs-panel>
        <semantic-form-recover-notification></semantic-form-recover-notification>
        <semantic-form-checklist-input for="rdf_type" type="radio" row=true></semantic-form-checklist-input>
        <semantic-form-text-input for="official_name" languages='["en","de","fr","it"]'></semantic-form-text-input>
        <semantic-form-text-input for="alternative_name" languages='["en","de","fr","it"]'></semantic-form-text-input>
        <semantic-form-text-input for="acronym" languages='["en","de","fr","it"]'></semantic-form-text-input>
        <semantic-form-tree-picker-input for="group_type"></semantic-form-tree-picker-input>
        <bs-row>
          <bs-col sm='4'>
            <semantic-form-tree-picker-input for="residence"></semantic-form-tree-picker-input>
          </bs-col>
          <bs-col sm='2'>
            <semantic-form-text-input for="formation_year"></semantic-form-text-input>
          </bs-col>
          <bs-col sm='2'>
            <semantic-form-text-input for="dissolution_year"></semantic-form-text-input>
          </bs-col>
        </bs-row>
        <semantic-form-autocomplete-input for="predecessor"></semantic-form-autocomplete-input>
        <semantic-form-autocomplete-input for="controller"></semantic-form-autocomplete-input>
        <semantic-form-text-input for="website"></semantic-form-text-input>
        <semantic-form-autocomplete-input for="venues">
            <semantic-form new-subject-template="http://data.performing-arts.ch/a/{{UUID}}" fields='[[fieldDefinitions
                venue_rdf_type="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/RDFtype"
                venue_cidoc_type="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/CIDOCtype"
                venue_official_title="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/VenueOfficialTitle"
            ]]'>
                <div style="display: none;">
                    <semantic-form-hidden-input for="venue_rdf_type" default-value='[[resolvePrefix "crm:E22_Man-Made_Object"]]'></semantic-form-hidden-input>
                    <semantic-form-hidden-input for="venue_cidoc_type" default-value='[[resolvePrefix "spav:dwkm"]]'></semantic-form-hidden-input>
                </div>
                <semantic-form-text-input for="venue_official_title"></semantic-form-text-input>
                <button name="submit" class="btn btn-default">Create Venue</button>
            </semantic-form>            
        </semantic-form-autocomplete-input>
        <semantic-form-autocomplete-input for="members">
            <semantic-form new-subject-template="http://data.performing-arts.ch/a/{{UUID}}" fields='[[fieldDefinitions
                member_type="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/RDFtype"
                member_label="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/PersonCommonAppellation"
            ]]'>
                <div style="display: none;">
                    <semantic-form-hidden-input for='member_type' default-values='["[[resolvePrefix "crm:E21_Person"]]", "[[resolvePrefix "rico:Person"]]"]'></semantic-form-hidden-input>
                </div>
                <semantic-form-text-input for="member_label" languages='["en","de","fr","it"]'></semantic-form-text-input>
                <button name="submit" class="btn btn-default">Create Person</button>
            </semantic-form>
        </semantic-form-autocomplete-input>
        <semantic-form-autocomplete-input for="associations"></semantic-form-autocomplete-input>
        <semantic-form-autocomplete-input for="record_sets">
          <semantic-form new-subject-template="http://data.performing-arts.ch/r/{{UUID}}" fields='[[fieldDefinitions
            record_set_rdf_type="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/RDFtype"
            record_set_identifier="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/RecordSetIdentifier"
            record_set_label="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/RecordSetLabel"
            record_set_type="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/RecordSetType"
            record_set_parent="http://performing-arts.ch/ldp-assets/fieldDefinitionContainer/RecordSetParent"
          ]]'>
            <div style="display: none;">
                <semantic-form-hidden-input for='record_set_rdf_type' default-value='[[resolvePrefix "rico:RecordSet"]]'></semantic-form-hidden-input>
                
            </div>
            <semantic-form-text-input for="record_set_identifier"></semantic-form-text-input>
            <semantic-form-text-input for="record_set_label"></semantic-form-text-input>
            <semantic-form-checklist-input type='radio' row=true for="record_set_type"></semantic-form-checklist-input>
            <!-- TODO: automatically add correct parent? -->
            <semantic-form-tree-picker-input for="record_set_parent" ></semantic-form-tree-picker-input>
            <button name="submit" class="btn btn-default">Create Record Set</button>
          </semantic-form>
        </semantic-form-autocomplete-input>
        <semantic-form-text-input for="sameAs"></semantic-form-text-input>
        <semantic-form-text-input for="note"></semantic-form-text-input>
        <semantic-form-checkbox-input for='repertories'></semantic-form-checkbox-input>
        <semantic-form-errors></semantic-form-errors>
        <!-- save and reset button for form -->
        <button
          name="submit"
          class="btn btn-default"
        >Save</button>
        <button
          name="reset"
          class="btn btn-default"
        >Reset</button>
      </bs-panel>
    </semantic-form>
  </div>